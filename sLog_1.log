2017-11-08 09:36:13 UTC

========================================
== Contract indaHash Coin initialized
== 
At address 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e

===============================================================================
============ Preliminary actions
===============================================================================

========================================
== Set wallets
== 

ACTIONS
@contract.transact_and_wait.set_wallet("0x000c14a7cAD4d8d41cd1c375083557e05c79f476") - by 0x7Df97252...
@contract.transact_and_wait.set_admin_wallet("0xDF8f647384Ed63AA931B3C509cC07c658bD45d00") - by 0x7Df97252...

VERIFY
ok  val [wallet acc]  is 000c14a7cad4d8d41cd1c375083557e05c79f476 as expected
ok  val [admin_wallet acc]  is df8f647384ed63aa931b3c509cc07c658bd45d00 as expected

DIFFERENCES
[:c, :wallet, "7df97252dba710b75a5364bf4bcddf12c9e4559d", "000c14a7cad4d8d41cd1c375083557e05c79f476"]
[:c, :admin_wallet, "7df97252dba710b75a5364bf4bcddf12c9e4559d", "df8f647384ed63aa931b3c509cc07c658bd45d00"]

========================================
== Check locked
== 

ACTIONS

VERIFY
ok  val [locked acc1] 1 is false as expected

DIFFERENCES
(no differences found)

===============================================================================
============ Before presale
===============================================================================

========================================
== Mint marketing: ok
== 

ACTIONS
@contract.transact_and_wait.mint_marketing("0xf12831Ac016d243137eB1Cf51414a05102Fa0361",50000000000000) - by 0x7Df97252...

VERIFY
ok  val [balance_of acc10] 10 is 50000000000000 as expected
ok  diff [balance_of acc10] is 50000000000000 as expected
ok  val [locked acc10] 10 is true as expected

DIFFERENCES
[:c, :tokens_issued_total, 0.0, 50000000.0, 50000000.0]
[:c, :tokens_issued_mkt, 0.0, 50000000.0, 50000000.0]
[10, :balance_of, 0.0, 50000000.0, 50000000.0]
[10, :locked, false, true]

========================================
== Early contribution: fails
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371e1b8>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 10)

VERIFY
ok  val [balance_of acc1] 1 is 0 as expected
ok  diff [balance_of acc1] is 0 as expected
ok  val [locked acc1] 1 is false as expected

DIFFERENCES
[1, :get_balance, 993351.5717218381, 993351.483721838, -0.088]

===============================================================================
============ Presale
===============================================================================

========================================
== presale
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1510153201) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1510153201 as expected

DIFFERENCES
[:c, :at_now, 1, 1510153201, 1510153200]
[:c, :test_time, 1, 1510153201, 1510153200]

========================================
== Some presale contributions
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371e1b8>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 100)
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371d628>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 0.49)
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371c980>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 30001)
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000436e008>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 50)

VERIFY
ok  val [balance_of acc1] 1 is 448000000000 as expected
ok  diff [balance_of acc1] is 448000000000 as expected
ok  val [balance_of acc2] 2 is 0 as expected
ok  diff [balance_of acc2] is 0 as expected
ok  val [balance_of acc3] 3 is 0 as expected
ok  diff [balance_of acc3] is 0 as expected
ok  diff [balance_of acc10] is 224000000000 as expected

DIFFERENCES
[:c, :eth, 0.0, 150.0, 150.0]
[:c, :ico_ether_received, 0.0, 150.0, 150.0]
[:c, :tokens_issued_total, 50000000.0, 50672000.0, 672000.0]
[:c, :tokens_issued_ico, 0.0, 672000.0, 672000.0]
[1, :get_balance, 993351.483721838, 993251.48028799, -100.003433848]
[1, :balance_of, 0.0, 448000.0, 448000.0]
[1, :ico_ether_contributed, 0.0, 100.0, 100.0]
[1, :ico_tokens_received, 0.0, 448000.0, 448000.0]
[1, :locked, false, true]
[2, :get_balance, 998295.7036940741, 998295.615694074, -0.088]
[3, :get_balance, 999995.6000000001, 999995.512, -0.088]
[10, :get_balance, 997496.105671056, 997446.103557208, -50.00211384800001]
[10, :balance_of, 50000000.0, 50224000.0, 224000.0]
[10, :ico_ether_contributed, 0.0, 50.0, 50.0]
[10, :ico_tokens_received, 0.0, 224000.0, 224000.0]

===============================================================================
============ After presale
===============================================================================

========================================
== after presale
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1510758001) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1510758001 as expected

DIFFERENCES
[:c, :at_now, 1510153201, 1510758001, 604800]
[:c, :test_time, 1510153201, 1510758001, 604800]

========================================
== No more contributions accepted after presale end
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000436f548>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 100)

VERIFY
ok  val [balance_of acc6] 6 is 0 as expected
ok  diff [balance_of acc6] is 0 as expected

DIFFERENCES
[6, :get_balance, 999398.311390044, 999398.223390044, -0.088]

========================================
== Mint marketing: still ok
== 

ACTIONS
@contract.transact_and_wait.mint_marketing("0x741d381E9149B6B1d61639c98ca453D31737D85c",10000000000000) - by 0x7Df97252...
@contract.transact_and_wait.mint_marketing("0x741d381E9149B6B1d61639c98ca453D31737D85c",21000000000000) - by 0x7Df97252...

VERIFY
ok  val [balance_of acc11] 11 is 10000000000000 as expected
ok  diff [balance_of acc11] is 10000000000000 as expected
ok  val [locked acc11] 11 is true as expected

DIFFERENCES
[:c, :tokens_issued_total, 50672000.0, 60672000.0, 10000000.0]
[:c, :tokens_issued_mkt, 50000000.0, 60000000.0, 10000000.0]
[11, :balance_of, 0.0, 10000000.0, 10000000.0]
[11, :locked, false, true]

========================================
== Token transfer attempt fails even though whitelisted
== 

ACTIONS
@contract.transact_and_wait.transfer("0x86350703e5885dd73d3945168bFa0a7A7E140E4F",100000000) - by 0xCb3a421A...

VERIFY
ok  diff [balance_of acc1] is 0 as expected
ok  val [balance_of acc19] 19 is 0 as expected
ok  diff [balance_of acc19] is 0 as expected

DIFFERENCES
[1, :get_balance, 993251.48028799, 993251.39228799, -0.088]

===============================================================================
============ ICO - week 1
===============================================================================

========================================
== ico week 1
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1511967601) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1511967601 as expected

DIFFERENCES
[:c, :at_now, 1510758001, 1511967601, 1209600]
[:c, :test_time, 1510758001, 1511967601, 1209600]

========================================
== ICO contribution week 1
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371d628>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 100)
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371c980>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 60)

VERIFY
ok  val [balance_of acc2] 2 is 384000000000 as expected
ok  diff [balance_of acc2] is 384000000000 as expected
ok  val [balance_of acc3] 3 is 230400000000 as expected
ok  diff [balance_of acc3] is 230400000000 as expected

DIFFERENCES
[:c, :eth, 150.0, 310.0, 160.0]
[:c, :ico_ether_received, 150.0, 310.0, 160.0]
[:c, :tokens_issued_total, 60672000.0, 61286400.0, 614400.0]
[:c, :tokens_issued_ico, 672000.0, 1286400.0, 614400.0]
[2, :get_balance, 998295.615694074, 998195.6129262099, -100.002767864]
[2, :balance_of, 0.0, 384000.0, 384000.0]
[2, :ico_ether_contributed, 0.0, 100.0, 100.0]
[2, :ico_tokens_received, 0.0, 384000.0, 384000.0]
[2, :locked, false, true]
[3, :get_balance, 999995.512, 999935.5092321361, -60.002767864000006]
[3, :balance_of, 0.0, 230400.0, 230400.0]
[3, :ico_ether_contributed, 0.0, 60.0, 60.0]
[3, :ico_tokens_received, 0.0, 230400.0, 230400.0]
[3, :locked, false, true]

===============================================================================
============ ICO - week 2
===============================================================================

========================================
== ico week 2
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1512572401) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1512572401 as expected

DIFFERENCES
[:c, :at_now, 1511967601, 1512572401, 604800]
[:c, :test_time, 1511967601, 1512572401, 604800]

========================================
== ICO contribution week 2
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000371c0e8>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 100)

VERIFY
ok  diff [balance_of acc4] is 352000000000 as expected
ok  diff [get_balance acc] is 100000000000000000000 as expected

DIFFERENCES
[:c, :eth, 310.0, 410.0, 100.0]
[:c, :ico_ether_received, 310.0, 410.0, 100.0]
[:c, :tokens_issued_total, 61286400.0, 61638400.0, 352000.0]
[:c, :tokens_issued_ico, 1286400.0, 1638400.0, 352000.0]
[4, :get_balance, 599499.766152408, 599399.763384082, -100.002768326]
[4, :balance_of, 0.0, 352000.0, 352000.0]
[4, :ico_ether_contributed, 0.0, 100.0, 100.0]
[4, :ico_tokens_received, 0.0, 352000.0, 352000.0]
[4, :locked, false, true]

========================================
== Funding goal exceeded - funds released
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000436fa98>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 20000)

VERIFY
ok  diff [balance_of acc5] is 70400000000000 as expected
ok  val [get_balance acc]  is 0 as expected
ok  diff [get_balance acc] is -410000000000000000000 as expected
ok  diff [get_balance acc] is 20410000000000000000000 as expected

DIFFERENCES
[:c, :eth, 410.0, 0.0, -410.0]
[:c, :ico_ether_received, 410.0, 20410.0, 20000.0]
[:c, :tokens_issued_total, 61638400.0, 132038400.0, 70400000.0]
[:c, :tokens_issued_ico, 1638400.0, 72038400.0, 70400000.0]
[5, :get_balance, 999799.995215352, 979799.992266736, -20000.002948616]
[5, :balance_of, 0.0, 70400000.0, 70400000.0]
[5, :ico_ether_contributed, 0.0, 20000.0, 20000.0]
[5, :ico_tokens_received, 0.0, 70400000.0, 70400000.0]
[5, :locked, false, true]

===============================================================================
============ ICO - week 3
===============================================================================

========================================
== ico week 3
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1513177201) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1513177201 as expected

DIFFERENCES
[:c, :at_now, 1512572401, 1513177201, 604800]
[:c, :test_time, 1512572401, 1513177201, 604800]

========================================
== ICO contribution week 3
== 

ACTIONS
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000436f548>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 100)
CONTRIBUTE : @client.transfer(acct_#<Eth::Key:0x000000000436e008>, 0x54bcE08D896298c8d3800Cd1725AE38d7917fC7e, 150)

VERIFY
ok  diff [balance_of acc6] is 320000000000 as expected
ok  diff [balance_of acc10] is 480000000000 as expected
***ERR*** diff [get_balance acc] is 250000000000000000000 expected 150000000000000000000

DIFFERENCES
[:c, :ico_ether_received, 20410.0, 20660.0, 250.0]
[:c, :tokens_issued_total, 132038400.0, 132838400.0, 800000.0]
[:c, :tokens_issued_ico, 72038400.0, 72838400.0, 800000.0]
[6, :get_balance, 999398.223390044, 999298.220445542, -100.00294450199999]
[6, :balance_of, 0.0, 320000.0, 320000.0]
[6, :ico_ether_contributed, 0.0, 100.0, 100.0]
[6, :ico_tokens_received, 0.0, 320000.0, 320000.0]
[6, :locked, false, true]
[10, :get_balance, 997446.103557208, 997296.1019327061, -150.001624502]
[10, :balance_of, 50224000.0, 50704000.0, 480000.0]
[10, :ico_ether_contributed, 50.0, 200.0, 150.0]
[10, :ico_tokens_received, 224000.0, 704000.0, 480000.0]

===============================================================================
============ After ICO
===============================================================================

========================================
== after ico
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1513782001) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1513782001 as expected

DIFFERENCES
[:c, :at_now, 1513177201, 1513782001, 604800]
[:c, :test_time, 1513177201, 1513782001, 604800]

========================================
== Check locked
== 

ACTIONS
@contract.transact_and_wait.remove_lock("0xCb3a421Abe0799054A22499B6b4026391A3c8ADf") - by 0xDF8f6473...

VERIFY
ok  val [locked acc1] 1 is false as expected

DIFFERENCES
[1, :locked, true, false]

========================================
== Token transfer attempt still fails during cooldown
== 

ACTIONS
@contract.transact_and_wait.transfer("0x86350703e5885dd73d3945168bFa0a7A7E140E4F",100000000) - by 0xCb3a421A...

VERIFY
ok  diff [balance_of acc1] is 0 as expected
ok  val [balance_of acc19] 19 is 0 as expected
ok  diff [balance_of acc19] is 0 as expected
ok  val [locked acc1] 1 is false as expected
ok  val [locked acc19] 19 is false as expected

DIFFERENCES
[1, :get_balance, 993251.39228799, 993251.30428799, -0.088]

========================================
== Claim airdrop
== 

ACTIONS
@contract.transact_and_wait.claim_airdrop() - by 0xf12831Ac...

VERIFY
ok  diff [balance_of acc10] is 2388874088392 as expected

DIFFERENCES
[:c, :tokens_issued_total, 132838400.0, 135227274.088392, 2388874.088392]
[:c, :tokens_claimed_airdrop, 0.0, 2388874.088392, 2388874.088392]
[10, :get_balance, 997296.1019327061, 997296.100172486, -0.00176022]
[10, :balance_of, 50704000.0, 53092874.088392, 2388874.088392]
[10, :airdrop_claimed, false, true]

===============================================================================
============ After 2-day cooldown period
===============================================================================

========================================
== after cooldown
== 

ACTIONS
@contract.transact_and_wait.set_test_time(1513954801) - by 0x7Df97252...

VERIFY
ok  val [at_now acc]  is 1513954801 as expected

DIFFERENCES
[:c, :at_now, 1513782001, 1513954801, 172800]
[:c, :test_time, 1513782001, 1513954801, 172800]

========================================
== Token transfers
== 

ACTIONS
@contract.transact_and_wait.transfer("0x86350703e5885dd73d3945168bFa0a7A7E140E4F",100000000) - by 0xCb3a421A...
@contract.transact_and_wait.transfer("0x27dF33761961f0E79CBeb4A4A1e3fA48B7c3bB06",2000000) - by 0x86350703...
@contract.transact_and_wait.transfer("0x86350703e5885dd73d3945168bFa0a7A7E140E4F",4000000) - by 0xb632B057...
@contract.transact_and_wait.transfer("0x27dF33761961f0E79CBeb4A4A1e3fA48B7c3bB06",8000000) - by 0xb632B057...

VERIFY
ok  diff [balance_of acc1] is -100000000 as expected
ok  diff [balance_of acc19] is 100000000 as expected
ok  diff [balance_of acc2] is 0 as expected
ok  diff [balance_of acc4] is 0 as expected

DIFFERENCES
[1, :get_balance, 993251.30428799, 993251.30308756, -0.00120043]
[1, :balance_of, 448000.0, 447900.0, -100.0]
[2, :get_balance, 998195.6129262099, 998195.43692621, -0.176]
[19, :get_balance, 999998.7617087701, 999998.67370877, -0.088]
[19, :balance_of, 0.0, 100.0, 100.0]


Direct call: contract.transact_and_wait.remove_lock_multiple([@a[2], @a[6], @a[7]]) - admin key

========================================
== Unlock a list of accounts
== 

ACTIONS

VERIFY
ok  val [locked acc2] 2 is false as expected
ok  val [locked acc3] 3 is false as expected
ok  val [locked acc4] 4 is false as expected

DIFFERENCES
[2, :locked, true, false]
[3, :locked, true, false]
[4, :locked, true, false]

========================================
== Acct 2 is now unlocked and can send to 13
== 

ACTIONS
@contract.transact_and_wait.transfer("0x6b6aB5Dabb0aab1f86570d131efaA12bfD2314d6",1000000) - by 0xb632B057...

VERIFY
ok  diff [balance_of acc2] is -1000000 as expected
ok  diff [balance_of acc13] is 1000000 as expected

DIFFERENCES
[2, :get_balance, 998195.43692621, 998195.4357257801, -0.00120043]
[2, :balance_of, 384000.0, 383999.0, -1.0]
[13, :balance_of, 0.0, 1.0, 1.0]

========================================
== Reclaim funds 1 and 10 - not possible
== 

ACTIONS
@contract.transact_and_wait.reclaim_funds() - by 0xCb3a421A...
@contract.transact_and_wait.reclaim_funds() - by 0xf12831Ac...

VERIFY
ok  diff [balance_of acc1] is 0 as expected
ok  diff [get_balance acc1] is ≈0 as expected (within 0.1 ether)
ok  diff [balance_of acc10] is 0 as expected
ok  diff [get_balance acc10] is ≈0 as expected (within 0.1 ether)

DIFFERENCES
[1, :get_balance, 993251.30308756, 993251.21508756, -0.088]
[10, :get_balance, 997296.100172486, 997296.0121724859, -0.088]


Direct call: contract.transact_and_wait.transfer_multiple([@a[4], @a[15], @a[16]], [1000000, 1000000, 1000000]) - key 1

========================================
== Transfer multiple
== 

ACTIONS

VERIFY
ok  val [balance_of acc5] 5 is 70400000000000 as expected
ok  val [balance_of acc15] 15 is 1000000 as expected
ok  val [balance_of acc16] 16 is 1000000 as expected

DIFFERENCES
[1, :get_balance, 993251.21508756, 993251.213119638, -0.001967922]
[1, :balance_of, 447900.0, 447898.0, -2.0]
[15, :balance_of, 0.0, 1.0, 1.0]
[16, :balance_of, 0.0, 1.0, 1.0]

Errors found: 1

2017-11-08 09:37:15 UTC
